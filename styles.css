html, body {
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

[x-cloak] { display: none !important; }

.glass {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* Sticky header offset for anchor jumps */
:root { --header-offset: 88px; } /* fallback */
.scroll-offset { scroll-margin-top: var(--header-offset); }

/* --------------------------
   Theme tokens (dark default)
   -------------------------- */
:root{
  --bg: #020617;            /* slate-950 */
  --text: #e2e8f0;          /* slate-200 */
  --muted: rgba(226,232,240,0.70);
  --card: rgba(255,255,255,0.06);
  --card-border: rgba(255,255,255,0.10);
  --header-bg: rgba(2,6,23,0.60);
  --bar: rgba(255,255,255,0.12);
  --bar-hover: rgba(255,255,255,0.18);
  --tooltip-bg: rgba(15,23,42,0.92);
  --tooltip-border: rgba(255,255,255,0.10);

  --spark-area: rgba(99,102,241,0.25);
  --spark-line: rgba(226,232,240,0.85);

  --donut-track: rgba(255,255,255,0.12);
  --donut-used: rgba(99,102,241,0.85);
  --donut-new: rgba(34,211,238,0.82);
}

/* Light theme */
html[data-theme="light"]{
  --bg: #f8fafc;            /* slate-50 */
  --text: #0f172a;          /* slate-900 */
  --muted: rgba(15,23,42,0.70);
  --card: rgba(255,255,255,0.78);
  --card-border: rgba(15,23,42,0.12);
  --header-bg: rgba(248,250,252,0.75);
  --bar: rgba(2,6,23,0.10);
  --bar-hover: rgba(2,6,23,0.16);
  --tooltip-bg: rgba(255,255,255,0.96);
  --tooltip-border: rgba(15,23,42,0.14);

  --spark-area: rgba(99,102,241,0.18);
  --spark-line: rgba(15,23,42,0.72);

  --donut-track: rgba(15,23,42,0.12);
  --donut-used: rgba(79,70,229,0.90);
  --donut-new: rgba(8,145,178,0.90);
}

/* Apply tokens */
body{
  background: var(--bg) !important;
  color: var(--text) !important;
}

/* Background orbs become softer in light mode */
html[data-theme="light"] .theme-bg-orb-1 { opacity: 0.25; }
html[data-theme="light"] .theme-bg-orb-2 { opacity: 0.18; }
html[data-theme="light"] .theme-bg-orb-3 { opacity: 0.18; }
html[data-theme="light"] .theme-bg-wash { opacity: 0.18; }

/* Header + cards */
.theme-header{ background: var(--header-bg) !important; border-color: var(--card-border) !important; }
.theme-card{ background: var(--card) !important; border-color: var(--card-border) !important; }
.theme-btn{ background: var(--card) !important; border-color: var(--card-border) !important; color: var(--text) !important; }
.theme-select{ background: var(--card) !important; border-color: var(--card-border) !important; color: var(--text) !important; }

.theme-logo{ background: var(--card) !important; border-color: var(--card-border) !important; }

.theme-title{ color: var(--text) !important; }
.theme-strong{ color: var(--text) !important; }
.theme-muted{ color: var(--muted) !important; }

/* Sidebar nav */
.theme-navitem{ }
.theme-navidle{ color: var(--text) !important; opacity: 0.85; }
.theme-navactive{
  background: rgba(99,102,241,0.16) !important;
  color: var(--text) !important;
  border: 1px solid rgba(99,102,241,0.22) !important;
}

/* Bars / tooltips / charts */
.theme-bar{ background: var(--bar) !important; }
.theme-bar:hover{ background: var(--bar-hover) !important; }

.theme-tooltip{
  background: var(--tooltip-bg) !important;
  border-color: var(--tooltip-border) !important;
  color: var(--text) !important;
}

.spark-area{ fill: var(--spark-area) !important; }
.spark-line{ stroke: var(--spark-line) !important; fill: none !important; stroke-width: 3 !important; }

.donut-track{ stroke: var(--donut-track) !important; }
.donut-used{ stroke: var(--donut-used) !important; }
.donut-new{ stroke: var(--donut-new) !important; }

/* Accordion badge */
.theme-badge{
  background: rgba(255,255,255,0.10) !important;
}
html[data-theme="light"] .theme-badge{
  background: rgba(15,23,42,0.08) !important;
}

/* Error panel */
.theme-error{
  background: rgba(239,68,68,0.10) !important;
  border-color: rgba(239,68,68,0.30) !important;
  color: #fecaca !important;
}
html[data-theme="light"] .theme-error{
  color: #7f1d1d !important;
  background: rgba(239,68,68,0.08) !important;
}

/* Print-ready */
@media print {
  :root { color-scheme: light; }
  html[data-theme] body { background: #fff !important; color: #0f172a !important; }
  .no-print { display: none !important; }
  .glass { backdrop-filter: none !important; -webkit-backdrop-filter: none !important; }
  .print-card { border: 1px solid #e2e8f0 !important; background: #fff !important; }
  .print-text { color: #0f172a !important; }
  .print-muted { color: #334155 !important; }
  a { color: #0f172a !important; text-decoration: none !important; }
  section, article { break-inside: avoid; page-break-inside: avoid; }
}
